{"version":3,"file":"VCalendar.js","names":["VCalendarCategory","VCalendarDaily","VCalendarWeekly","makeCalendarBaseProps","makeCalendarWithEventsProps","useCalendarWithEvents","forwardRefs","computed","onMounted","onUpdated","ref","watch","getParsedCategories","copyTimestamp","DAY_MIN","DAYS_IN_MONTH_MAX","DAYS_IN_WEEK","getEndOfMonth","getStartOfMonth","nextDay","parseTimestamp","prevDay","relativeDays","timestampToDate","updateFormatted","updateRelative","updateWeekday","validateTimestamp","genericComponent","useRender","VCalendar","name","props","modelValue","type","String","Number","Date","validate","categoryDays","default","x","isFinite","parseInt","categories","Array","categoryText","Function","maxDays","categoryHideDynamic","Boolean","categoryShowAll","categoryForInvalid","setup","_ref","slots","attrs","emit","root","base","lastStart","lastEnd","parsedValue","parsedStart","value","times","today","parsedCategoryDays","parsedCategories","renderProps","around","component","weekdays","parsedWeekdays","start","end","getStartOfWeek","getEndOfWeek","weekday","parsedEnd","days","i","push","getCategoryList","Error","eventWeekdays","categoryMode","monthLongFormatter","getFormatter","timeZone","month","monthShortFormatter","title","spanYears","year","spanMonths","checkChange","date","move","amount","arguments","length","undefined","moved","forward","mover","limit","day","now","getTime","next","prev","noEvents","categoryMap","reduce","map","category","index","categoryName","count","categoryLength","parsedEvents","forEach","ev","filter","hasOwnProperty","updateEventVisibility","window","requestAnimationFrame","Component","_withDirectives","_createVNode","_mergeProps","filterProps","onClick:date","e","getScopedSlots","_resolveDirective","quiet"],"sources":["../../../src/labs/VCalendar/VCalendar.tsx"],"sourcesContent":["// Styles\nimport './VCalendarCategory.sass'\nimport './VCalendarDaily.sass'\nimport './VCalendarWeekly.sass'\n\n// Components\nimport { VCalendarCategory } from './VCalendarCategory'\nimport { VCalendarDaily } from './VCalendarDaily'\nimport { VCalendarWeekly } from './VCalendarWeekly'\n\n// Composables\nimport { makeCalendarBaseProps } from './composables/calendarBase'\nimport { makeCalendarWithEventsProps, useCalendarWithEvents } from './composables/calendarWithEvents'\nimport { forwardRefs } from '@/composables/forwardRefs'\n\n// Utilities\nimport { computed, onMounted, onUpdated, ref, watch } from 'vue'\nimport { getParsedCategories } from './util/parser'\nimport {\n  copyTimestamp,\n  DAY_MIN,\n  DAYS_IN_MONTH_MAX,\n  DAYS_IN_WEEK,\n  getEndOfMonth,\n  getStartOfMonth,\n  nextDay,\n  parseTimestamp,\n  prevDay,\n  relativeDays,\n  timestampToDate,\n  updateFormatted,\n  updateRelative,\n  updateWeekday,\n  validateTimestamp,\n} from './util/timestamp'\nimport { genericComponent, useRender } from '@/util'\n\n// Types\nimport type { PropType } from 'vue'\nimport type {\n  CalendarCategory, CalendarCategoryTextFunction,\n  CalendarDayBodySlotScope,\n  CalendarDaySlotScope, CalendarEvent, CalendarEventParsed,\n  CalendarTimestamp,\n} from './types'\nimport type { EventProp, GenericProps, JSXComponent } from '@/util'\n\n// Types\ninterface VCalendarRenderProps {\n  start: CalendarTimestamp\n  end: CalendarTimestamp\n  component: JSXComponent & { filterProps: <T>(props: T) => Partial<T> }\n  maxDays: number\n  weekdays: number[]\n  categories: CalendarCategory[]\n}\n\ninterface EventSlotScope {\n  event: CalendarEvent\n  outside: boolean\n  singline: boolean\n  overlapsNoon: boolean\n  formatTime: (withTime: CalendarTimestamp, ampm: boolean) => string\n  timeSummary: () => string\n  eventSummary: () => JSX.Element\n  eventParsed: CalendarEventParsed\n  day: CalendarDaySlotScope\n  start: boolean\n  end: boolean\n  timed: boolean\n}\n\ninterface DaySlotScope extends CalendarTimestamp {\n  outside: boolean\n  index: number\n  week: CalendarTimestamp[]\n}\n\ninterface DayHeaderSlotScope extends CalendarTimestamp {\n  index: number\n  week: CalendarTimestamp[]\n}\n\ninterface CalendarDayCategorySlotScope extends CalendarDayBodySlotScope {\n  category: CalendarCategory\n}\n\nexport const VCalendar = genericComponent<new (\n  props: {\n    [key: `on${Capitalize<string>}:date`]: EventProp<[Event, CalendarTimestamp]>\n    [key: `on${Capitalize<string>}:day-category`]: EventProp<[Event, CalendarDayCategorySlotScope]>\n    [key: `on${Capitalize<string>}:day`]: EventProp<[Event, CalendarDayBodySlotScope]>\n    [key: `on${Capitalize<string>}:event`]: EventProp<[Event, EventSlotScope]>\n    [key: `on${Capitalize<string>}:interval`]: EventProp<[Event, CalendarTimestamp]>\n    [key: `on${Capitalize<string>}:more`]: EventProp<[Event, CalendarDaySlotScope]>\n    [key: `on${Capitalize<string>}:time-category`]: EventProp<[Event, CalendarDayCategorySlotScope]>\n    [key: `on${Capitalize<string>}:time`]: EventProp<[Event, CalendarDayBodySlotScope]>\n  },\n  slots: {\n    'category': CalendarDayCategorySlotScope\n    'day': DaySlotScope\n    'day-body': CalendarDayBodySlotScope\n    'day-header': DayHeaderSlotScope\n    'day-label': CalendarTimestamp\n    'day-label-header': CalendarTimestamp\n    'day-month': CalendarTimestamp\n    'event': EventSlotScope\n    'interval': CalendarDayCategorySlotScope\n    'interval-header': never\n  },\n) => GenericProps<typeof props, typeof slots>>()({\n  name: 'VCalendar',\n\n  props: {\n    modelValue: {\n      type: [String, Number, Date] as PropType<string | number | Date>,\n      validate: validateTimestamp,\n    },\n    categoryDays: {\n      type: [Number, String],\n      default: 1,\n      validate: (x: any) => isFinite(parseInt(x)) && parseInt(x) > 0,\n    },\n    categories: {\n      type: [Array, String] as PropType<CalendarCategory[] | string>,\n      default: '',\n    },\n    categoryText: {\n      type: [String, Function] as PropType<string | CalendarCategoryTextFunction>,\n    },\n    maxDays: {\n      type: Number,\n      default: 7,\n    },\n    categoryHideDynamic: {\n      type: Boolean,\n    },\n    categoryShowAll: {\n      type: Boolean,\n    },\n    categoryForInvalid: {\n      type: String,\n      default: '',\n    },\n\n    ...makeCalendarBaseProps(),\n    ...makeCalendarWithEventsProps(),\n  },\n\n  setup (props, { slots, attrs, emit }) {\n    const root = ref<VCalendarWeekly | VCalendarDaily | VCalendarCategory>()\n    const base = useCalendarWithEvents(props, slots, attrs)\n\n    const lastStart = ref<CalendarTimestamp | null>(null)\n    const lastEnd = ref<CalendarTimestamp | null>(null)\n\n    const parsedValue = computed((): CalendarTimestamp => {\n      return (validateTimestamp(props.modelValue)\n        ? parseTimestamp(props.modelValue, true)\n        : (base.parsedStart.value || base.times.today))\n    })\n\n    const parsedCategoryDays = computed((): number => {\n      return parseInt(String(props.categoryDays)) || 1\n    })\n\n    const parsedCategories = computed((): CalendarCategory[] => {\n      return getParsedCategories(props.categories, props.categoryText)\n    })\n\n    const renderProps = computed((): VCalendarRenderProps => {\n      const around = parsedValue.value\n      let component: any = null\n      let maxDays = props.maxDays\n      let weekdays = base.parsedWeekdays.value\n      let categories = parsedCategories.value\n      let start = around\n      let end = around\n\n      switch (props.type) {\n        case 'month':\n          component = VCalendarWeekly\n          start = getStartOfMonth(around)\n          end = getEndOfMonth(around)\n          break\n        case 'week':\n          component = VCalendarDaily\n          start = base.getStartOfWeek(around)\n          end = base.getEndOfWeek(around)\n          maxDays = 7\n          break\n        case 'day':\n          component = VCalendarDaily\n          maxDays = 1\n          weekdays = [start.weekday]\n          break\n        case '4day':\n          component = VCalendarDaily\n          end = relativeDays(copyTimestamp(end), nextDay, 3)\n          updateFormatted(end)\n          maxDays = 4\n          weekdays = [\n            start.weekday,\n            (start.weekday + 1) % 7,\n            (start.weekday + 2) % 7,\n            (start.weekday + 3) % 7,\n          ]\n          break\n        case 'custom-weekly':\n          component = VCalendarWeekly\n          start = base.parsedStart.value || around\n          end = base.parsedEnd.value\n          break\n        case 'custom-daily':\n          component = VCalendarDaily\n          start = base.parsedStart.value || around\n          end = base.parsedEnd.value\n          break\n        case 'category':\n          const days = parsedCategoryDays.value\n\n          component = VCalendarCategory\n          end = relativeDays(copyTimestamp(end), nextDay, days)\n          updateFormatted(end)\n          maxDays = days\n          weekdays = []\n\n          for (let i = 0; i < days; i++) {\n            weekdays.push((start.weekday + i) % 7)\n          }\n\n          categories = getCategoryList(categories)\n          break\n        default:\n          const type = props.type satisfies never\n          throw new Error(`${type} is not a valid Calendar type`)\n      }\n\n      return { component, start, end, maxDays, weekdays, categories }\n    })\n\n    const eventWeekdays = computed((): number[] => {\n      return renderProps.value.weekdays\n    })\n\n    const categoryMode = computed((): boolean => {\n      return props.type === 'category'\n    })\n\n    const monthLongFormatter = computed(() => {\n      return base.getFormatter({\n        timeZone: 'UTC', month: 'long',\n      })\n    })\n\n    const monthShortFormatter = computed(() => {\n      return base.getFormatter({\n        timeZone: 'UTC', month: 'short',\n      })\n    })\n\n    const title = computed((): string => {\n      const { start, end } = renderProps.value\n      const spanYears = start.year !== end.year\n      const spanMonths = spanYears || start.month !== end.month\n\n      if (spanYears) {\n        return monthShortFormatter.value(start, true) + ' ' + start.year + ' - ' + monthShortFormatter.value(end, true) + ' ' + end.year\n      }\n\n      if (spanMonths) {\n        return monthShortFormatter.value(start, true) + ' - ' + monthShortFormatter.value(end, true) + ' ' + end.year\n      } else {\n        return monthLongFormatter.value(start, false) + ' ' + start.year\n      }\n    })\n\n    function checkChange (): void {\n      const { start, end } = renderProps.value\n      if (!lastStart.value || !lastEnd.value ||\n        start.date !== lastStart.value.date ||\n        end.date !== lastEnd.value.date) {\n        lastStart.value = start\n        lastEnd.value = end\n        emit('change', { start, end })\n      }\n    }\n\n    function move (amount = 1): void {\n      const moved = copyTimestamp(parsedValue.value)\n      const forward = amount > 0\n      const mover = forward ? nextDay : prevDay\n      const limit = forward ? DAYS_IN_MONTH_MAX : DAY_MIN\n      let times = forward ? amount : -amount\n\n      while (--times >= 0) {\n        switch (props.type) {\n          case 'month':\n            moved.day = limit\n            mover(moved)\n            break\n          case 'week':\n            relativeDays(moved, mover, DAYS_IN_WEEK)\n            break\n          case 'day':\n            relativeDays(moved, mover, 1)\n            break\n          case '4day':\n            relativeDays(moved, mover, 4)\n            break\n          case 'category':\n            relativeDays(moved, mover, parsedCategoryDays.value)\n            break\n        }\n      }\n\n      updateWeekday(moved)\n      updateFormatted(moved)\n      updateRelative(moved, base.times.now)\n\n      if (props.modelValue instanceof Date) {\n        emit('update:modelValue', timestampToDate(moved))\n      } else if (typeof props.modelValue === 'number') {\n        emit('update:modelValue', timestampToDate(moved).getTime())\n      } else {\n        emit('update:modelValue', moved.date)\n      }\n\n      emit('moved', moved)\n    }\n\n    function next (amount = 1): void {\n      move(amount)\n    }\n\n    function prev (amount = 1): void {\n      move(-amount)\n    }\n\n    function getCategoryList (categories: CalendarCategory[]): CalendarCategory[] {\n      if (!base.noEvents.value) {\n        const categoryMap: any = categories.reduce((map: any, category, index) => {\n          if (typeof category === 'object' && category.categoryName) map[category.categoryName] = { index, count: 0 }\n          else if (typeof category === 'string') map[category] = { index, count: 0 }\n          return map\n        }, {})\n\n        if (!props.categoryHideDynamic || !props.categoryShowAll) {\n          let categoryLength = categories.length\n\n          base.parsedEvents.value.forEach(ev => {\n            let category = ev.category\n\n            if (typeof category !== 'string') {\n              category = props.categoryForInvalid\n            }\n\n            if (!category) {\n              return\n            }\n\n            if (category in categoryMap) {\n              categoryMap[category].count++\n            } else if (!props.categoryHideDynamic) {\n              categoryMap[category] = {\n                index: categoryLength++,\n                count: 1,\n              }\n            }\n          })\n        }\n\n        if (!props.categoryShowAll) {\n          for (const category in categoryMap) {\n            if (categoryMap[category].count === 0) {\n              delete categoryMap[category]\n            }\n          }\n        }\n\n        categories = categories.filter((category: CalendarCategory) => {\n          if (typeof category === 'object' && category.categoryName) {\n            return categoryMap.hasOwnProperty(category.categoryName)\n          } else if (typeof category === 'string') {\n            return categoryMap.hasOwnProperty(category)\n          }\n          return false\n        })\n      }\n      return categories\n    }\n\n    watch(renderProps, checkChange)\n\n    onMounted(() => {\n      base.updateEventVisibility()\n      checkChange()\n    })\n\n    onUpdated(() => {\n      window.requestAnimationFrame(base.updateEventVisibility)\n    })\n\n    useRender(() => {\n      const { start, end, maxDays, component: Component, weekdays, categories } = renderProps.value\n      return (\n        <Component\n          ref={ root }\n          class={['v-calendar', { 'v-calendar-events': !base.noEvents.value }]}\n          v-resize_quiet={ base.updateEventVisibility }\n          role=\"grid\"\n          { ...Component.filterProps(props) }\n          start={ start.date }\n          end={ end.date }\n          maxDays={ maxDays }\n          weekdays={ weekdays }\n          categories={ categories }\n          onClick:date={ (e: MouseEvent, day: CalendarTimestamp) => {\n            if (attrs['onUpdate:modelValue']) emit('update:modelValue', day.date)\n            if (attrs['onClick:date']) emit('click:date', e, day)\n          }}\n          v-slots={ base.getScopedSlots() }\n        />\n      )\n    })\n\n    return forwardRefs({\n      ...base,\n      lastStart,\n      lastEnd,\n      parsedValue,\n      parsedCategoryDays,\n      renderProps,\n      eventWeekdays,\n      categoryMode,\n      title,\n      monthLongFormatter,\n      monthShortFormatter,\n      parsedCategories,\n      checkChange,\n      move,\n      next,\n      prev,\n      getCategoryList,\n    }, root)\n  },\n})\n\nexport type VCalendar = InstanceType<typeof VCalendar>\n"],"mappings":"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","ignoreList":[]}